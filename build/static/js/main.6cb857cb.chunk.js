(this["webpackJsonpnetease-cloud-music-api-with-web"]=this["webpackJsonpnetease-cloud-music-api-with-web"]||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(57),s=a.n(c),i=a(1);function l(){return r.a.createElement("div",{className:"brand"})}var o,u=function(){return r.a.createElement("div",{className:"fix-header"},r.a.createElement(l,null))},m=(a(65),a(58)),f=a.n(m),d=a(3),v=a.n(d),p=a(4);!function(e){e.get="GET",e.post="post"}(o||(o={}));var g=function(){var e=Object(p.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"highlight";if(!e||!t)return"";var r=e.toLowerCase(),c=t.toLowerCase();if(r.includes(c)){var s=r.indexOf(c),i=e.substr(s,t.length),l="<".concat(a,' class="').concat(n,'">').concat(i,"</").concat(a,">"),o=new RegExp(t,"gi");return e.replace(o,l)}return e},h=function(e){var t=e.split(".");return 1===t.length?t[0]:t},E=function(e,t){if(Array.isArray(t)){var a=e,n=!0,r=!1,c=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){if(!(a=a[s.value]))break}}catch(l){r=!0,c=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}return e[t]},y=a(18),O={clientWidth:0,loading:!1,songInfo:sessionStorage.songInfo?JSON.parse(sessionStorage.songInfo):void 0},j=function(e,t){switch(t.type){case"setClientWidth":return Object(y.a)({},e,{clientWidth:t.width});case"showLoading":return Object(y.a)({},e,{loading:!0});case"hideLoading":return Object(y.a)({},e,{loading:!1});case"setSongInfo":return Object(y.a)({},e,{songInfo:t.info});default:return e}},N=r.a.createContext(null),w=function(e){var t=e.songs,a=e.showRate,c=void 0!==a&&a,s=e.rateMinLength,l=void 0===s?2:s,o=e.topRateMarked,u=void 0===o?3:o,m=e.artists,f=void 0===m?"artists":m,d=e.album,y=void 0===d?"album":d,O=e.keyword,j=void 0===O?"":O,w=e.onSongClick,S=e.alias,x=void 0===S?"alias":S,k=Object(n.useContext)(N).dispatch,I=h(f),C=h(y),T=h(x),M=function(){var e=Object(p.a)(v.a.mark((function e(t){var a,n,r,c,s,l,o,u,m,f,d,p,b,h,E,y=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>1&&void 0!==y[1]?y[1]:[],l=y.length>2?y[2]:void 0,o=t.name,(null===l||void 0===l?void 0:l.length)&&(o+="\uff08".concat(l.join(""),"\uff09")),u=s.join("/"),e.next=7,g("/song/url?id=".concat(t.id));case 7:return m=e.sent,(f=(null===m||void 0===m?void 0:null===(a=m.data[0])||void 0===a?void 0:a.url)||"")||alert("\u65e0\u7248\u6743\uff01\u8bf7\u767b\u5f55\u518d\u8bd5"),e.next=12,Promise.all([g("/song/detail?ids=".concat(t.id)),g("/lyric?id=".concat(t.id))]);case 12:d=e.sent,p=Object(i.a)(d,2),b=p[0],h=p[1],E={name:o,artists:u,id:t.id,picUrl:(null===b||void 0===b?void 0:null===(n=b.songs[0])||void 0===n?void 0:null===(r=n.al)||void 0===r?void 0:r.picUrl)||"",songUrl:f,lyric:null===h||void 0===h?void 0:null===(c=h.lrc)||void 0===c?void 0:c.lyric},sessionStorage.setItem("songInfo",JSON.stringify(E)),k({type:"setSongInfo",info:E}),window.location.hash="/play?id=".concat(t.id),"function"===typeof w&&w(t);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){if(!e||!e.length)return"";var a="";return a+=e.join(" / "),t&&(a+=" - ",a+=t.name),j?b(a,j):a};return t&&t.length?r.a.createElement("section",{className:"new-songs"},t.map((function(e,t){var a,n=E(e,I).map((function(e){return e.name})),s=E(e,C),i=E(e,T);return r.a.createElement("div",{className:"new-songs-item",key:t,onClick:function(){return M(e,n,i)}},function(e){return c?e<u?r.a.createElement("div",{className:"new-songs-rate rate-top-marked"},(e+1).toString().padStart(l,"0")):r.a.createElement("div",{className:"new-songs-rate"},(e+1).toString().padStart(l,"0")):null}(t),r.a.createElement("div",{className:"new-songs-info"},j?r.a.createElement("div",{className:"new-songs-title",dangerouslySetInnerHTML:{__html:b(e.name,j)}}):r.a.createElement("div",{className:"new-songs-title"},e.name," ",(a=i)&&a.length?r.a.createElement("span",{className:"new-songs-alias"},"(",a.join(""),")"):null),j?r.a.createElement("div",{className:"new-songs-extra",dangerouslySetInnerHTML:{__html:L(n,s)}}):r.a.createElement("div",{className:"new-songs-extra"},L(n,s))),r.a.createElement("div",{className:"play-button"},r.a.createElement("span",{className:"btn-icon"})))}))):null},S=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),o=l[0],u=l[1];Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/personalized?limit=6");case 2:(t=e.sent)&&t.result&&u(t.result);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/personalized/newsong");case 2:(t=e.sent)&&t.result&&c(t.result);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);return r.a.createElement("div",{className:"recommend"},r.a.createElement("div",{className:"remd-tl"},"\u63a8\u8350\u6b4c\u5355"),r.a.createElement("section",{className:"remd-songs"},r.a.createElement("div",{className:"remd-list"},o.map((function(e){return r.a.createElement("div",{className:"remd-li",key:e.id,onClick:function(){return t=e.id,void(window.location.hash="/playList?id=".concat(t));var t}},r.a.createElement("div",{className:"remd-img"},r.a.createElement("img",{src:e.picUrl,alt:e.name,className:"u-img"}),r.a.createElement("span",{className:"u-earp remd_lnum"},(e.playCount/1e4).toFixed(1)+"\u4e07")),r.a.createElement("div",{className:"remd-text"},e.name))})))),r.a.createElement("div",{className:"remd-tl"},"\u6700\u65b0\u97f3\u4e50"),r.a.createElement(w,{songs:a,artists:"song.artists",album:"song.album",alias:"song.alias"}))},x="";!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();x="".concat(t.toString().padStart(2,"0"),"\u6708").concat(a.toString().padStart(2,"0"),"\u65e5")}();var k={height:1,width:"100vw"},I=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(20),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),u=o[0],m=o[1],f=Object(n.useState)([]),d=Object(i.a)(f,2)[1],b=function(){var t=Object(p.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t,a=0;d((function(e){return t=e,e})),s((function(e){return a=e,e+20})),m(t.slice(0,a))}}))})),e.current&&a.observe(e.current);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/top/list?idx=1&limit=20");case 2:(t=e.sent)&&200===t.code&&t.playlist&&t.playlist.tracks&&(b(),d(t.playlist.tracks),m(t.playlist.tracks.slice(0,c)),s(c+20));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"top"},r.a.createElement("section",{className:"top-header"},r.a.createElement("div",{className:"top-logo"}),r.a.createElement("div",{className:"top-time"},"\u66f4\u65b0\u65f6\u95f4\uff1a",x)),r.a.createElement(w,{songs:u,artists:"ar",album:"al",alias:"alia",showRate:!0}),r.a.createElement("div",{ref:e,style:k}))},C=(a(56),a(10)),T=a.n(C),M=a(17);var L={},R={display:"none"};function U(e){var t=e.style,a=e.result,c=e.keyword,s=e.config,i=e.setOffsetConfig,l=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=new IntersectionObserver((function(e){l.current&&e.forEach((function(e){e.isIntersecting&&"function"===typeof i&&i({offset:s.limit+s.offset,isScrollTrigger:!0})}))}));l.current&&e.observe(l.current)}),[]),r.a.createElement("section",{className:"search-result",style:t},r.a.createElement(w,{songs:a.songs,keyword:c}),r.a.createElement("div",{ref:l,style:!a.songs||s.isEnd?R:L,className:"label"},"\u52a0\u8f7d\u4e2d\u2026\u2026"),r.a.createElement("div",{style:a.songs&&s.isEnd?L:R,className:"label"},"\u5168\u90e8\u52a0\u8f7d\u5b8c"))}var z=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useRef)(null),l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],m=o[1],f=Object(n.useState)([]),d=Object(i.a)(f,2),b=d[0],h=d[1],E=Object(n.useState)(!1),O=Object(i.a)(E,2),j=O[0],N=O[1],w=Object(n.useState)([]),S=Object(i.a)(w,2),x=S[0],k=S[1],I=Object(n.useState)(!1),C=Object(i.a)(I,2),L=C[0],R=C[1],z=Object(n.useState)(!1),P=Object(i.a)(z,2),W=P[0],A=P[1],F=Object(n.useState)(""),q=Object(i.a)(F,2),_=q[0],J=q[1],B=Object(n.useState)({}),H=Object(i.a)(B,2),D=H[0],G=H[1],K=Object(n.useState)([]),V=Object(i.a)(K,2),X=V[0],Y=V[1],$=Object(n.useState)({offset:0,isScrollTrigger:!1}),Q=Object(i.a)($,2),Z=Q[0],ee=Q[1],te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=Object(n.useState)(e),r=Object(i.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){s(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(u),ae=Object(n.useRef)({limit:20,offset:0,count:0,isEnd:!1}),ne=function(e){window.setTimeout((function(){var t=X.indexOf(e);-1!==t&&X.splice(t,1),X.unshift(e),sessionStorage.setItem("history",X.toString()),Y(Object(M.a)(X))}),0)},re=function(e){var t=e.target.innerText;s.current.value=t,m(t),J(t),c((function(e){return e+1})),ee({offset:0,isScrollTrigger:!1}),s.current.blur(),ne(t)},ce=function(e){var t=e.target.innerText;s.current.value=t,m(t),J(t),c((function(e){return e+1})),ee({offset:0,isScrollTrigger:!1}),ne(t)};return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/search/hot");case 2:(t=e.sent)&&t.result&&t.result.hots&&h(t.result.hots);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=localStorage.getItem("history");e&&Y(e.split(","))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/search/suggest?keywords=".concat(te,"&type=mobile"));case 2:(t=e.sent)&&t.result&&t.result.allMatch?k(t.result.allMatch):k([]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();te&&!W?(R(!0),e()):R(!1)}),[te]),Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(v.a.mark((function e(){var t,a,n,r,c,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/search?limit=".concat(ae.current.limit,"&keywords=").concat(_,"&offset=").concat(ae.current.offset));case 2:(t=e.sent)&&t.result&&(a=!1,n=t.result.songCount,r=t.result.songs.length,(!n||r+ae.current.offset>=n)&&(a=!0),ae.current.count=n,ae.current.isEnd=a,Z.isScrollTrigger?(c=D.songs,s=[].concat(Object(M.a)(c),Object(M.a)(t.result.songs)),i=Object(y.a)({},D,{songs:s}),G(i)):G(t.result));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&(Z.isScrollTrigger?ae.current.offset=Z.offset:(ae.current.limit=20,ae.current.offset=0,ae.current.count=0,ae.current.isEnd=!1,A(!0),G({})),e())}),[_,a,Z]),r.a.createElement("div",{className:"search-page"},r.a.createElement("section",{className:"input-box"},r.a.createElement("div",{className:"input-cover"},r.a.createElement(T.a,{type:"search",size:"xxs",className:"search-icon"}),r.a.createElement("label",{className:"placeholder",style:u||j?{visibility:"hidden"}:{visibility:"visible"}},"\u641c\u7d22\u6b4c\u66f2\u3001\u6b4c\u624b\u3001\u4e13\u8f91"),r.a.createElement("input",{type:"search",name:"search",className:"input-content",autoComplete:"off",onChange:function(e){var t=e.target.value;j||m(t)},onCompositionStart:function(){N(!0)},onCompositionEnd:function(e){var t=e.target.value;m(t),N(!1)},onKeyUp:function(e){if(13===e.which){var t=e.target.value;J(t),c((function(e){return e+1})),ee({offset:0,isScrollTrigger:!1}),s.current.blur(),ne(t)}},onBlur:function(){u||R(!1)},onFocus:function(){A(!1),R(!0)},defaultValue:u,ref:s}),r.a.createElement(T.a,{type:"cross-circle-o",className:"clear-icon",size:"xxs",onClick:function(){m(""),R(!1),A(!1),s.current.value=""},style:u?{visibility:"visible"}:{visibility:"hidden"}}))),r.a.createElement("section",{style:{display:W?"none":"block"}},r.a.createElement("section",{className:"search-tip",style:{display:L?"block":"none"}},r.a.createElement("section",{className:"search-info",onClick:function(){J(u),c((function(e){return e+1})),ee({offset:0,isScrollTrigger:!1}),s.current.blur(),ne(u)}},"\u641c\u7d22\u201c",u,"\u201d"),r.a.createElement("ul",{className:"tips"},x.length?x.map((function(e,t){return r.a.createElement("li",{className:"tip",key:t,onClick:re},r.a.createElement(T.a,{type:"search",size:"xs",className:"icon"}),r.a.createElement("div",{className:"tip-content"},e.keyword))})):null)),r.a.createElement("section",{className:"search-default",style:{display:L?"none":"block"}},r.a.createElement("div",{className:"search-hot"},r.a.createElement("div",{className:"title"},"\u70ed\u95e8\u641c\u7d22"),r.a.createElement("ul",{className:"list"},b.map((function(e){return r.a.createElement("li",{className:"list-item",key:e.first,onClick:ce},e.first)})))),r.a.createElement("div",{className:"search-history"},r.a.createElement("ul",{className:"list"},X.map((function(e,t){return r.a.createElement("li",{className:"list-item",onClick:re,key:t},r.a.createElement(T.a,{type:"right",size:"xs",className:"icon prefix-icon"}),r.a.createElement("span",{className:"item-content"},e),r.a.createElement(T.a,{type:"cross",size:"xs",className:"icon suffix-icon"}))})))))),r.a.createElement(U,{config:ae.current,style:{display:W?"block":"none"},result:D,keyword:_,setOffsetConfig:ee}))},P=[{title:"\u63a8\u8350\u97f3\u4e50"},{title:"\u70ed\u6b4c\u699c"},{title:"\u641c\u7d22"}],W=function(){return r.a.createElement(f.a,{tabs:P},r.a.createElement(S,null),r.a.createElement(I,null),r.a.createElement(z,null))},A=(a(119),function(){var e,t,a,c=Object(n.useState)(""),s=Object(i.a)(c,2),l=s[0],o=s[1],u=Object(n.useState)({}),m=Object(i.a)(u,2),f=m[0],d=m[1],b=Object(n.useState)(!0),h=Object(i.a)(b,2),E=h[0],y=h[1],O=function(){y((function(e){return!e}))};return Object(n.useEffect)((function(){var e=function(e){var t=window.location.hash.split("?"),a=t[1]?new URLSearchParams(t[1]):null;return a&&a.get(e)||""}("id");o(e)}),[]),Object(n.useEffect)((function(){l&&function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/playlist/detail?id=".concat(l,"&s=0"));case 2:t=e.sent,d(null===t||void 0===t?void 0:t.playlist);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l]),r.a.createElement("div",{id:"play-list"},r.a.createElement("section",{id:"play-list-header"},r.a.createElement("section",{className:"play-list-bg",style:{backgroundImage:"url(".concat(f.coverImgUrl,")")}})),r.a.createElement("section",{id:"play-list-detail"},r.a.createElement("div",{className:"cover",style:{backgroundImage:"url(".concat(f.coverImgUrl,")")}},r.a.createElement("span",{className:"list-icon"},"\u6b4c\u5355"),r.a.createElement("span",{className:"list-play-count"},(a=f.playCount)?(a/1e4).toFixed(1)+"\u4e07":"0.0\u4e07")),r.a.createElement("div",{className:"play-list-info"},r.a.createElement("div",{className:"play-list-name line-2"},f.name),r.a.createElement("div",{className:"play-list-author"},r.a.createElement("div",{className:"avatar",style:{backgroundImage:"url(".concat(null===(e=f.creator)||void 0===e?void 0:e.avatarUrl,")")}}),r.a.createElement("span",{className:"author-name"},null===(t=f.creator)||void 0===t?void 0:t.nickname)))),r.a.createElement("section",{id:"play-list-intro"},r.a.createElement("div",{className:"play-list-tags"},"\u6807\u7b7e\uff1a",f.tags&&f.tags.map((function(e){return r.a.createElement("div",{key:e,className:"play-list-tag"},e)}))),r.a.createElement("div",{className:"intro-dtl-box"},r.a.createElement("div",{className:E?"intro-dtl line-3":"intro-dtl"},f.description?f.description.split("\n").map((function(e,t){return r.a.createElement("span",{key:t},t?e:"\u7b80\u4ecb\uff1a"+e,r.a.createElement("br",null))})):null),E?r.a.createElement(T.a,{type:"down",className:"icon-btn",size:"xs",onClick:O}):r.a.createElement(T.a,{type:"up",className:"icon-btn",size:"xs",onClick:O}))),r.a.createElement("h3",{className:"title"},"\u6b4c\u66f2\u5217\u8868"),r.a.createElement(w,{songs:f.tracks,artists:"ar",album:"al",alias:"alia",showRate:!0}))}),F=r.a.memo((function(e){var t=e.current,a=e.duration,n=e.width,c=e.setPlayTime,s=(t/a*100).toFixed(2),i=r.a.useMemo((function(){var e=Math.floor(a),t=e%60;return"".concat((e/60>>>0).toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progress",onClick:function(e){e.stopPropagation();var t=10.769*n/100,r=78.462*n/100,s=e.pageX;c(a*((s-t)/r))}},r.a.createElement("div",{className:"finish",style:{width:"".concat(s,"%")}})),r.a.createElement("div",{className:"play-time"},function(){var e=Math.floor(t),a=e%60;return"".concat((e/60>>>0).toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}()," / ",i))})),q=(a(120),function(){var e=Object(n.useContext)(N).state,t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)("song-img"),o=Object(i.a)(l,2),u=o[0],m=o[1],f=Object(n.useState)(0),d=Object(i.a)(f,2),v=d[0],p=d[1],g=Object(n.useRef)(null),b=Object(n.useRef)({el:null,idx:0}),h=Object(n.useState)(0),E=Object(i.a)(h,2),y=E[0],O=E[1],j=Object(n.useState)(0),w=Object(i.a)(j,2),S=w[0],x=w[1],k=Object(n.useState)(0),I=Object(i.a)(k,2),C=I[0],T=I[1],L=Object(n.useState)([]),R=Object(i.a)(L,2),U=R[0],z=R[1],P=Object(n.useState)([]),W=Object(i.a)(P,2),A=W[0],q=W[1],_=Object(n.useState)(!0),J=Object(i.a)(_,2),B=J[0],H=J[1],D={backgroundImage:"url(".concat(e.songInfo.picUrl,")")};return r.a.createElement("section",{className:"play",onClick:function(){if(g.current.paused)m("song-img circling"),g.current.play(),s(!1);else{m("song-img");var e=document.querySelector(".song-img"),t=document.querySelector(".song-roll-wrap"),a=window.getComputedStyle(e).transform,n=a.match(/-?(\d+\.?\d*)/g),r=[].slice.call(n,0,4).map(Number),c=function(e,t,a,n){var r=Math.round(180*Math.asin(e)/Math.PI),c=Math.round(180*Math.acos(t)/Math.PI),s=Math.round(180*Math.asin(a)/Math.PI),i=Math.round(180*Math.acos(n)/Math.PI),l=0;return r===c||-r===c?l=i:-r+c===180?l=180+s:r+c===180&&(l=360-s||360-i),l>=360?0:l}(r[0],r[1],r[2],r[3])+v;p(c>=360?c-360:c),t.style.transform=a,g.current.pause(),s(!0)}}},r.a.createElement("section",{className:"recorder"}),r.a.createElement("section",{className:"play-bg",style:D}),r.a.createElement("section",{className:"play-zone"},r.a.createElement("div",{className:"song-disc"},r.a.createElement("div",{className:"song-roll-wrap",style:{transform:"rotate(".concat(v,"deg)")}},r.a.createElement("div",{className:u,style:D})),r.a.createElement("div",{className:"parse-icon",style:{display:c?void 0:"none"}})),r.a.createElement("div",{className:"song-info"},r.a.createElement("div",{className:"song-title"},r.a.createElement("span",{className:"song-name"},e.songInfo.name),r.a.createElement("span",{className:"song-gap"},"-"),r.a.createElement("span",{className:"artists"},e.songInfo.artists)),r.a.createElement("div",{className:"lyric"},r.a.createElement("div",{className:"song-scroll",style:{transform:"translateY(-".concat(C,"px)")}},function(){var t=e.songInfo.lyric;return t?t.split("\n").slice(0,-1).map((function(e){var t=e.split("]"),a=t[0].slice(1).split(":").map(Number),n=Object(i.a)(a,2);return[(60*n[0]+n[1]).toFixed(3),t[1].trim()]})).map((function(e,t){return e[1]?r.a.createElement("div",{className:"lrc-item","data-timeline":e[0],key:t},e[1]):r.a.createElement("div",{className:"lrc-item","data-timeline":e[0],key:t},"\xa0")})):null}()))),r.a.createElement("div",{className:"progress-bar"},r.a.createElement(F,{current:S,duration:y,width:e.clientWidth,setPlayTime:function(t){if(e.songInfo.lyric){var a=A.findIndex((function(e){return e>t})),n=(-1!==a?U.slice(0,a-1):U).reduce((function(e,t){return e+t})),r=b.current,c=r.el,s=r.idx,i=null,l=Object(M.a)(document.querySelectorAll(".lrc-item")),o=-1!==a?l.slice(0,a):l,u=o[o.length-1];if(c){var m=l.slice(0,s);i=m[m.length-1]}else i=l[l.length-1];i.style.color=null,u.style.color="#fff",b.current={el:u.nextElementSibling,idx:a},T(n)}x(t),g.current.currentTime=t}}))),e.songInfo.songUrl&&r.a.createElement("audio",{src:e.songInfo.songUrl,ref:g,onEnded:function(){x(0),m("song-img"),T(0),g.current.currentTime=0,s(!0)},onCanPlay:function(){if(B){var t;H(!1);var a=null===(t=g.current)||void 0===t?void 0:t.duration;if(O(a),e.songInfo.lyric){var n=Object(M.a)(document.querySelectorAll(".lrc-item")),r=n.map((function(e){return e.offsetHeight})),c=n.map((function(e){return Number(e.getAttribute("data-timeline"))}));z(r),q(c);var s=document.querySelector(".lrc-item");s.style.color="white";var i=s.nextElementSibling;b.current={el:i,idx:1}}}},onTimeUpdate:function(e){var t=e.target.currentTime,a=b.current,n=a.el,r=a.idx,c=A[r];if(c&&Number(c)-t<=.3){var s=n.previousElementSibling,i=U[r-1];s.style.color=null,n.style.color="white";var l={el:n.nextElementSibling,idx:r+1};b.current=l,T((function(e){return e+i}))}x(t)}}))}),_=(a(121),function(){var e=Object(n.useReducer)(j,O),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)("/"),l=Object(i.a)(s,2),o=l[0],m=l[1],f=function(){var e=window.location.hash;e.includes("/playList")?m("/playList"):e.includes("/play")?m("/play"):m("/")};return Object(n.useEffect)((function(){f(),window.addEventListener("hashchange",(function(){f()}),!1)}),[]),Object(n.useEffect)((function(){var e=function(){var e=document.documentElement.clientWidth;c({type:"setClientWidth",width:e})};window.addEventListener("resize",function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];t&&clearTimeout(t),t=window.setTimeout((function(){e.apply(void 0,r)}),a)}}((function(){e()}),300),!1),e()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(N.Provider,{value:{state:a,dispatch:c}},function(){switch(o){case"/playList":return r.a.createElement(A,null);case"/play":return r.a.createElement(q,null);case"/":default:return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement("main",{id:"main"},r.a.createElement(W,null)))}}()))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){e.exports=a(122)}},[[60,1,2]]]);
//# sourceMappingURL=main.6cb857cb.chunk.js.map